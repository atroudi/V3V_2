<!DOCTYPE html>
<html lang="en">
<head>
<title>V3V Statistics</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
<script src="http://www.amcharts.com/lib/3/amcharts.js" type="text/javascript"></script>
<script src="http://www.amcharts.com/lib/3/serial.js" type="text/javascript"></script>
<script src="http://www.amcharts.com/lib/3/plugins/dataloader/dataloader.min.js" type="text/javascript"></script>
<script >
function zoomChart(my_chart) {
	my_chart.zoomToIndexes(my_chart.dataProvider.length - 40,
			my_chart.dataProvider.length - 1);
}

function jsonDataFactory(url, categoryField){
	var jsonData = {
			"type" : "serial",
			"theme" : "light",
			"marginRight" : 40,
			"marginLeft" : 40,
			"autoMarginOffset" : 20,
			"dataDateFormat" : "YYYY-MM-DD",
			"valueAxes" : [ {
				"id" : "v1",
				"axisAlpha" : 0,
				"position" : "left",
				"ignoreAxisWidth" : true
			} ],
			"balloon" : {
				"borderThickness" : 1,
				"shadowAlpha" : 0
			},
			"graphs" : [ {
				"id" : "g1",
				"balloon" : {
					"drop" : true,
					"adjustBorderColor" : false,
					"color" : "#ffffff"
				},
				"bullet" : "round",
				"bulletBorderAlpha" : 1,
				"bulletColor" : "#FFFFFF",
				"bulletSize" : 5,
				"hideBulletsCount" : 50,
				"lineThickness" : 2,
				"title" : "videos per day",
				"useLineColorForBulletBorder" : true,
				"valueField" : "count",
				"balloonText" : "<span style='font-size:18px;'>[[value]]</span>"
			} ],
			"chartScrollbar" : {
				"graph" : "g1",
				"oppositeAxis" : false,
				"offset" : 30,
				"scrollbarHeight" : 80,
				"backgroundAlpha" : 0,
				"selectedBackgroundAlpha" : 0.1,
				"selectedBackgroundColor" : "#888888",
				"graphFillAlpha" : 0,
				"graphLineAlpha" : 0.5,
				"selectedGraphFillAlpha" : 0,
				"selectedGraphLineAlpha" : 1,
				"autoGridCount" : true,
				"color" : "#AAAAAA"
			},
			"chartCursor" : {
				"pan" : true,
				"valueLineEnabled" : true,
				"valueLineBalloonEnabled" : true,
				"cursorAlpha" : 1,
				"cursorColor" : "#258cbb",
				"limitToGraph" : "g1",
				"valueLineAlpha" : 0.2
			},
			"valueScrollbar" : {
				"oppositeAxis" : false,
				"offset" : 50,
				"scrollbarHeight" : 10
			},
			"categoryField" : categoryField,
			"categoryAxis" : {
				"parseDates" : true,
				"dashLength" : 1,
				"minorGridEnabled" : true
			},
			"export" : {
				"enabled" : true
			}
		};
		jsonData["dataLoader"] = { "url": url, "format": "json"};
		return jsonData;
}

var chartHTML = "<div class=\"container\">\
<div class=\"panel with-nav-tabs panel-default\">\
<div class=\"panel-heading\" style=\"background: #FFFFCC !important\">\
	<ul class=\"nav nav-tabs\">\
		<li class=\"active\"><a href=\"#tab1default\" data-toggle=\"tab\">{title}</a> </Dli>\
	</ul>\
</div>\
<div class=\"panel-body\">\
	<div class=\"tab-content\">\
		<div class=\"tab-pane fade in active\" id=\"tab1default\">\
			<div id=\"{id}\" style=\"width: 100%; height: 400px; background-color: #FFFFFF;\"></div>\
		</div>\
	</div>\
</div>\
</div>\
</div>"

var chartList = [
	{'id':'videosperday','url':'get_videos_per_day', 'title':'Number of videos converted per day'},
	{'id':'durationcount','url':'get_video_duration_count', 'title':'Duration of videos converted'},
]

//var html = ""
//for (var chart in chartList){
	//var tmptxt = chartHTML;
	//tmptxt.replace("{id}", chart['id']);
	//tmptxt.replace("{title}", chart['title']);
	//html = html + tmptxt;
//}
//var chartDiv = document.getElementByName("charts");
//chartDiv.innerHTML = html;

//for (var chart in chartList){
	//var jsonData = jsonDataFactory(chart['url']);
	//var amChart = AmCharts.makeChart(chart['id'], jsonData);
	//amChart.addListener("rendered", zoomChart);
	//zoomChart(amChart);
//}

var jsonData = jsonDataFactory("get_video_duration_count", "duration");
var amChart = AmCharts.makeChart("durationcount", jsonData);

</script>
</head>
<body>

	<div class="page-header">
		{% load staticfiles %}
		<div style="float: left"><img src="{% static "coreserver/QCRI.jpg" %}" alt="Qatar Computing Research Institute" style="width:200px;"></div>
		<div style="float: right"><img src="{% static "coreserver/CSAIL.jpg" %}" alt="MIT Computer Science and Artificial Intelligence Laboratory" style="width:200px;"></div>
		</br> </br> </br>
		<center>
			<h2>
				&nbsp;&nbsp; Online Demo for <a
					href="http://ds.qcri.org/index.php/cloud-based-multimedia-content-distribution-and-protection-platform/21-sub-project/55-dgc">2D-3D
					Conversion</a>
			</h2>
			<p>
				&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; This demo converts
				uploaded 2D sports videos to 3D videos. More info about this project
				can be found <a
					href="http://ds.qcri.org/index.php/cloud-based-multimedia-content-distribution-and-protection-platform/21-sub-project/55-dgc">here</a>
			</p>
		</center>
	</div>
<div name="charts">
	<div class="container">
		<div class="panel with-nav-tabs panel-default">
			<div class="panel-heading" style="background: #FFFFCC !important">
				<ul class="nav nav-tabs">
					<li class="active"><a href="#tab1default" data-toggle="tab">Duration of videos uploaded</a> </Dli>
				</ul>
			</div>
			<div class="panel-body">
				<div class="tab-content">
					<div class="tab-pane fade in active" id="tab1default">
						<div id="durationcount"
							style="width: 100%; height: 400px; background-color: #FFFFFF;"></div>
					</div>

				</div>
			</div>

		</div>
	</div>	
</div>
	
</body>
</html>
